<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <% {            
      'jquery/3.2.0' => 'jquery.min.js',
      'popper.js/1.11.0' => 'umd/popper.min.js',
      'twitter-bootstrap/4.0.0-beta' => 'js/bootstrap.min.js',
      'font-awesome/4.7.0' => 'css/font-awesome.min.css',
      'select2/3.5.2' => 'select2.min.js select2.min.css',
      'codemirror/5.0.0' => 'codemirror.min.css theme/monokai.min.css codemirror.min.js mode/xml/xml.min.js',
      'summernote/0.6.1' => 'summernote.min.css summernote.min.js',
      'jquery-timeago/1.4.3' => 'jquery.timeago.min.js',      
      'Chart.js/2.7.0' => 'Chart.bundle.min.js'
      }.each { |k,v| %>    
      <% v.split(' ').each { |f| u = "https://cdnjs.cloudflare.com/ajax/libs/#{k}/#{f}" %>
        <% case f.split('.').last.to_sym; when :js %>
          <script src="<%=u%>"></script>      
        <% when :css %>
          <link rel="stylesheet" href="<%=u%>" />
        <% end %>
      <% } %>
    <% } %>

    <% [
      '/stylesheets/share.css',
      "/stylesheets/app.css?#{Time.now.to_i}"
      ].each { |f| %> 
      <link rel="stylesheet" href="<%=f%>" />    
    <% } %>

    <% [
      "//maps.googleapis.com/maps/api/js?libraries=places&key=#{ENV['GOOGLE_MAPS_API_KEY']}",
      '//cdn.rawgit.com/mahnunchik/markerclustererplus/736b0e3a7d916fbeb2ee5007494f17a5329b11a8/src/markerclusterer.js',
      '//cdn.rawgit.com/wordsandwriting/activate-tools/f39002fcc10a9a554c651543b3065847130c2811/js/jquery.geopicker.js',      
      "/javascripts/app.js?#{Time.now.to_i}"
      ].each { |f| %>
      <script src="<%=f%>"></script>
    <% } %>  

    <%= favicon_tag 'favicon.png' %>
    <title><%=@title%></title>
    <meta name="description" content="<%=@og_desc%>">
    <meta property="og:title" content="<%=@title%>" />
    <meta property="og:image" content="<%=@og_image%>" />

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

  </head>
  <body>

    <div id="fb-root"></div>
    <script>(function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id))
          return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=619967114806800";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script>    

    <div class="container">

      <%= partial :alert %>  


      <style>
        @media(min-width: 768px) {
          #sidebar { position: sticky; top: 1rem }
        }
      </style>

      <div class="row justify-content-center">

        <div class="col-auto">

          <div id="sidebar">

            <h1 style="font-size: 2em" class="mt-3 mb-0 font-weight-bold">Stephen Reid</h1>

            <img src="/images/me-square.png" class="rounded-circle my-3" style="max-width: 200px; width: 100%" />

            <ul class="fa-ul">
              <li><i class="fa fa-li fa-envelope"></i> <a data-toggle="tooltip" title="Email" target="_blank" href="mailto:stephen@stephenreid.net">stephen@stephenreid.net</a></li>              
              <li><i class="fa fa-li fa-facebook-square"></i> <a data-toggle="tooltip" title="Facebook" target="_blank" href="http://facebook.com/stephenreid.0">/stephenreid.0</a></li>
              <li><i class="fa fa-li fa-twitter"></i> <a data-toggle="tooltip" title="Twitter" target="_blank" href="http://twitter.com/stephenreid_">@stephenreid_</a></li>
              <li><i class="fa fa-li fa-github"></i> <a data-toggle="tooltip" title="Github" target="_blank" href="http://github.com/wordsandwriting">wordsandwriting</a></li>
              <li><i class="fa fa-li fa-soundcloud"></i> <a data-toggle="tooltip" title="Soundcloud" target="_blank" href="http://soundcloud.com/wordsandwriting">wordsandwriting</a></li>
              <li><i class="fa fa-li fa-medium"></i> <a data-toggle="tooltip" title="Medium" target="_blank" href="https://medium.com/@stephenreid_/">@stephenreid_</a></li>        
              <li><i class="fa fa-li fa-book"></i> <a data-toggle="tooltip" title="Goodreads" target="_blank" href="http://goodreads.com/stephenreid_">stephenreid_</a></li>                      
            </ul>

            <div class="mb-1">
              <div class="fb-follow" data-href="https://www.facebook.com/stephenreid.0" data-layout="button_count" data-size="small" data-show-faces="true"></div>
            </div>
            <div>
              <a href="https://twitter.com/stephenreid_" class="twitter-follow-button" data-show-screen-name="false" data-show-count="true">Follow @stephenreid_</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>
            <div>
              <a class="github-button" href="https://github.com/wordsandwriting" aria-label="Follow @wordsandwriting on GitHub">Follow</a>            
            </div>

          </div>

        </div>

        <div class="col-md">

          <script>
            $(function () {
              $('.place').hover(function () {
                $('.bgo', this).hide()
              }, function () {
                $('.bgo', this).show()
              })

              $("#nav a[href^=http]").attr('target', '_blank')
            })
          </script>       

          <div id="nav" class="mt-2">
            <%= ul_nav [
              ['Bio', '/'],
              ['Places', '/places'],
              ['Aspirations', '/aspirations'],
              ['Music', '/music'],       
              ['Books <i class="fa fa-external-link"></i>', 'http://goodreads.com/stephenreid_'],
              ['Google Maps reviews <i class="fa fa-external-link"></i>', 'https://www.google.co.uk/maps/contrib/102982136084858811312/reviews/'],
              ['Blog <i class="fa fa-external-link"></i>', 'https://medium.com/@stephenreid_']
              ], ul_class: 'nav nav-pills mb-2', li_class: 'nav-item', a_class: 'nav-link' %>
          </div>

          <%= yield %>

        </div>

      </div>      

    </div>

  </body>
</html>
