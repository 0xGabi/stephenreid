<style>#sidebar { display: none }</style>

<h2>
  <%=number_to_currency MyBinance.usd_value_sum, unit: '$', precision: 0 %>
</h2>

<% form_tag '/crypto/enter', :class => 'd-inline' do %>
  <%= submit_tag 'Enter', :class => 'btn btn-primary' %>
<% end %>

<% form_tag '/crypto/exit', :class => 'd-inline' do %>
  <%= submit_tag 'Exit', :class => 'btn btn-primary' %>
<% end %>

<table class="table mt-3">
  <thead>
    <tr>
      <th style="width: 1px">#</th> 
      <th>Currency</th> 
      <th>%</th>  
      <th>Units</th>  
      <th>$/unit</th>   
      <th>$</th>
    </tr>
  </thead>
  <%     

  data = []
  labels = []

  MyBinance.balances.each_with_index { |balance, i|
    pc = ((balance['usd']/MyBinance.usd_value_sum)*100).round;
    data << pc;
    labels << balance['asset']
  %>
    <tr>
      <td>
        <%=i+1%>
      </td>
      <td>
        <%=balance['asset']%>
      </td>
      <td>
        <%= pc %>%
      </td>      
      <td>
        <%= balance['free'] %>
      </td>
      <td>
        <%=number_to_currency MyBinance.usd_per_asset(balance['asset']), unit: '$', precision: 2  %>
      </td>            
      <td>
        <%= number_to_currency balance['usd'], unit: '$', precision: 0 %>
      </td>
    </tr>
  <% } %>
  <tfoot>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>      
      <th></th>
      <th><%=number_to_currency MyBinance.usd_value_sum, unit: '$', precision: 0 %></th>
    </tr>  
  </tfoot>
</table>