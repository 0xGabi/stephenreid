
<% s = Holding.all.map(&:valuation).sum %>

<table class="table mt-3">
	<thead>
		<th>Wallet</th>
		<th>Currency</th>
		<th>Units</th>
		<th>$/unit</th>    
		<th>$</th>
    <th>£</th>
    <th>%</th>
	</thead>
	<% Holding.all.sort_by { |h| -h.valuation }.each { |h| %>
		<tr>
			<td>
				<%=h.wallet%>
			</td>		
			<td>
				<%=h.currency%>
			</td>
			<td>
				<%=h.units%>
			</td>
			<td>
				<%=number_to_currency h.usd_per_unit, unit: '$', precision: 2  %>
			</td>      
			<td>
				<%=number_to_currency h.valuation, unit: '$', precision: 0 %>
			</td>
			<td>
				<%=number_to_currency h.valuation*Holding.gbp_per_usd, unit: '£', precision: 0 %>
			</td>     
      <td>
        <%= ((h.valuation.to_f/s)*100).round %>%
      </td>
		</tr>
	<% } %>
	<tr>
		<th></th>
		<th></th>
		<th></th>
		<th></th>
		<th><%=number_to_currency s, unit: '$', precision: 0 %></th>
    <th><%=number_to_currency Holding.all.map(&:valuation).sum*Holding.gbp_per_usd, unit: '£', precision: 0 %></th>
    <th></th>
	</tr>  
</table>